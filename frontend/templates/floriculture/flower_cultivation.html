{% extends "base.html" %}

{% block title %}Cultivo de Flores{% endblock %}

{% block content %}
<div class="ui container">
    <h1 class="ui header">Cultivo de Flores</h1>
    
    <div class="ui grid">
        <div class="sixteen wide column">
            <div class="ui segment">
                <div class="ui top attached tabular menu">
                    <a class="active item" data-tab="list">Lista de Cultivos</a>
                    <a class="item" data-tab="new">Novo Cultivo</a>
                </div>
                
                <!-- Lista de Cultivos -->
                <div class="ui bottom attached active tab segment" data-tab="list">
                    <div class="ui form">
                        <div class="fields">
                            <div class="six wide field">
                                <label>Espécie</label>
                                <input type="text" id="filter-species" placeholder="Filtrar por espécie">
                            </div>
                            <div class="six wide field">
                                <label>Status</label>
                                <select class="ui dropdown" id="filter-status">
                                    <option value="">Todos</option>
                                    <option value="Em Cultivo">Em Cultivo</option>
                                    <option value="Colheita">Colheita</option>
                                    <option value="Finalizado">Finalizado</option>
                                </select>
                            </div>
                            <div class="four wide field">
                                <label>&nbsp;</label>
                                <button class="ui primary button" id="btn-filter">Filtrar</button>
                            </div>
                        </div>
                    </div>
                    
                    <table class="ui celled table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Espécie</th>
                                <th>Variedade</th>
                                <th>Data de Plantio</th>
                                <th>Quantidade</th>
                                <th>Área (m²)</th>
                                <th>Estufa</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="flowers-table-body">
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                    
                    <div class="ui pagination menu" id="pagination">
                        <!-- Paginação será gerada via JavaScript -->
                    </div>
                </div>
                
                <!-- Novo Cultivo -->
                <div class="ui bottom attached tab segment" data-tab="new">
                    <form class="ui form" id="flower-form">
                        <div class="two fields">
                            <div class="field">
                                <label>Espécie</label>
                                <input type="text" name="species" placeholder="Espécie da flor">
                            </div>
                            <div class="field">
                                <label>Variedade</label>
                                <input type="text" name="variety" placeholder="Variedade da flor">
                            </div>
                        </div>
                        <div class="three fields">
                            <div class="field">
                                <label>Data de Plantio</label>
                                <input type="date" name="planting_date">
                            </div>
                            <div class="field">
                                <label>Quantidade</label>
                                <input type="number" name="quantity" placeholder="Quantidade">
                            </div>
                            <div class="field">
                                <label>Área (m²)</label>
                                <input type="number" step="0.01" name="area_m2" placeholder="Área em m²">
                            </div>
                        </div>
                        <div class="three fields">
                            <div class="field">
                                <label>Estufa</label>
                                <select class="ui dropdown" name="greenhouse_id" id="greenhouse-select">
                                    <option value="">Selecione uma estufa</option>
                                    <!-- Opções serão carregadas via JavaScript -->
                                </select>
                            </div>
                            <div class="field">
                                <label>Data Esperada de Colheita</label>
                                <input type="date" name="expected_harvest_date">
                            </div>
                            <div class="field">
                                <label>Status</label>
                                <select class="ui dropdown" name="status">
                                    <option value="Em Cultivo">Em Cultivo</option>
                                    <option value="Colheita">Colheita</option>
                                    <option value="Finalizado">Finalizado</option>
                                </select>
                            </div>
                        </div>
                        <div class="field">
                            <label>Observações</label>
                            <textarea name="notes" rows="3"></textarea>
                        </div>
                        <button class="ui primary button" type="submit">Salvar</button>
                        <button class="ui button" type="reset">Limpar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Detalhes -->
    <div class="ui modal" id="flower-detail-modal">
        <i class="close icon"></i>
        <div class="header">Detalhes do Cultivo</div>
        <div class="content">
            <div class="ui form">
                <div class="two fields">
                    <div class="field">
                        <label>Espécie</label>
                        <input type="text" id="detail-species" readonly>
                    </div>
                    <div class="field">
                        <label>Variedade</label>
                        <input type="text" id="detail-variety" readonly>
                    </div>
                </div>
                <div class="three fields">
                    <div class="field">
                        <label>Data de Plantio</label>
                        <input type="text" id="detail-planting-date" readonly>
                    </div>
                    <div class="field">
                        <label>Quantidade</label>
                        <input type="text" id="detail-quantity" readonly>
                    </div>
                    <div class="field">
                        <label>Área (m²)</label>
                        <input type="text" id="detail-area" readonly>
                    </div>
                </div>
                <div class="three fields">
                    <div class="field">
                        <label>Estufa</label>
                        <input type="text" id="detail-greenhouse" readonly>
                    </div>
                    <div class="field">
                        <label>Data Esperada de Colheita</label>
                        <input type="text" id="detail-harvest-date" readonly>
                    </div>
                    <div class="field">
                        <label>Status</label>
                        <input type="text" id="detail-status" readonly>
                    </div>
                </div>
                <div class="field">
                    <label>Observações</label>
                    <textarea id="detail-notes" readonly rows="3"></textarea>
                </div>
            </div>
            
            <h4 class="ui dividing header">Registros de Colheita</h4>
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Quantidade</th>
                        <th>Qualidade</th>
                        <th>Observações</th>
                    </tr>
                </thead>
                <tbody id="harvest-records-body">
                    <!-- Dados serão carregados via JavaScript -->
                </tbody>
            </table>
            
            <h4 class="ui dividing header">Registros de Tratamento</h4>
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Tipo</th>
                        <th>Produto</th>
                        <th>Quantidade</th>
                        <th>Observações</th>
                    </tr>
                </thead>
                <tbody id="treatment-records-body">
                    <!-- Dados serão carregados via JavaScript -->
                </tbody>
            </table>
        </div>
        <div class="actions">
            <button class="ui primary button" id="btn-edit-flower">Editar</button>
            <button class="ui button" id="btn-add-harvest">Adicionar Colheita</button>
            <button class="ui button" id="btn-add-treatment">Adicionar Tratamento</button>
            <div class="ui cancel button">Fechar</div>
        </div>
    </div>
    
    <!-- Modal de Colheita -->
    <div class="ui modal" id="harvest-modal">
        <i class="close icon"></i>
        <div class="header">Registrar Colheita</div>
        <div class="content">
            <form class="ui form" id="harvest-form">
                <input type="hidden" name="flower_id" id="harvest-flower-id">
                <div class="two fields">
                    <div class="field">
                        <label>Data da Colheita</label>
                        <input type="date" name="harvest_date" required>
                    </div>
                    <div class="field">
                        <label>Quantidade</label>
                        <input type="number" name="quantity" placeholder="Quantidade" required>
                    </div>
                </div>
                <div class="field">
                    <label>Qualidade</label>
                    <select class="ui dropdown" name="quality_grade" required>
                        <option value="A">A - Excelente</option>
                        <option value="B">B - Boa</option>
                        <option value="C">C - Regular</option>
                    </select>
                </div>
                <div class="field">
                    <label>Observações</label>
                    <textarea name="notes" rows="2"></textarea>
                </div>
            </form>
        </div>
        <div class="actions">
            <button class="ui primary button" id="btn-save-harvest">Salvar</button>
            <div class="ui cancel button">Cancelar</div>
        </div>
    </div>
    
    <!-- Modal de Tratamento -->
    <div class="ui modal" id="treatment-modal">
        <i class="close icon"></i>
        <div class="header">Registrar Tratamento</div>
        <div class="content">
            <form class="ui form" id="treatment-form">
                <input type="hidden" name="flower_id" id="treatment-flower-id">
                <div class="two fields">
                    <div class="field">
                        <label>Data do Tratamento</label>
                        <input type="date" name="treatment_date" required>
                    </div>
                    <div class="field">
                        <label>Tipo de Tratamento</label>
                        <select class="ui dropdown" name="treatment_type" required>
                            <option value="Fertilização">Fertilização</option>
                            <option value="Irrigação">Irrigação</option>
                            <option value="Controle de Pragas">Controle de Pragas</option>
                            <option value="Poda">Poda</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                </div>
                <div class="three fields">
                    <div class="field">
                        <label>Produto Utilizado</label>
                        <input type="text" name="product_used" placeholder="Nome do produto" required>
                    </div>
                    <div class="field">
                        <label>Quantidade</label>
                        <input type="number" step="0.01" name="quantity" placeholder="Quantidade" required>
                    </div>
                    <div class="field">
                        <label>Unidade</label>
                        <select class="ui dropdown" name="unit" required>
                            <option value="kg">kg</option>
                            <option value="g">g</option>
                            <option value="L">L</option>
                            <option value="ml">ml</option>
                            <option value="unidade">unidade</option>
                        </select>
                    </div>
                </div>
                <div class="field">
                    <label>Observações</label>
                    <textarea name="notes" rows="2"></textarea>
                </div>
            </form>
        </div>
        <div class="actions">
            <button class="ui primary button" id="btn-save-treatment">Salvar</button>
            <div class="ui cancel button">Cancelar</div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/flower_cultivation.js"></script>
{% endblock %}